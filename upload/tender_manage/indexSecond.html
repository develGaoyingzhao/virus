<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<title>公益科普服务平台</title>
	<link href="css/common.css" type="text/css" rel="stylesheet" />
</head>
<body>

<div id="header" class="clearfix">
	<div class="main">
		<a href="index.html"><img class="logo" src="img/logo.png"/></a>

		<div class="top-btn">
			<span class="login-btn" onclick="window.location.href='login.html'">登录</span>
			<span class="reg-btn" onclick="window.location.href='reg.html'">注册</span>
		</div>

	</div>
</div>


<div class="main">

	<div class="tender">

		<ul class="main-tab clearfix">
			<li><a href="index.html">Sequence Database</a></li>
			<li class="active"><a href="indexSecond.html">New Database</a></li>
			<li><a href="indexThird.html">Literature Database</a></li>
		</ul>


		<div class="tender-main">



			<div class="tab-col">
				<span class="active">列表</span>
				<span>图表</span>
			</div>

			<ul class="tab-list">
				<li>
					<table class="table">
						<thead>
						<tr>
							<th>序号</th>
							<th>类型</th>
							<th>报道时间</th>
							<th>标题</th>
							<th>感染人数</th>
							<th>病毒类型</th>
							<th>网址地址</th>
						</tr>
						</thead>

						<tbody id="dataList">

						</tbody>

					</table>

				</li>

				<li class="hide">
					<div class="chart-main">

						<h1>一、折线分布图</h1>
						<div class="chart-col" id="myChart1"></div>
						<h1>二、地域分布图</h1>
						<div class="chart-col" id="myChart2"></div>
						<h1>三、传播场所分布图</h1>
						<div class="chart-col" id="myChart3"></div>
					</div>
				</li>

			</ul>



		</div>

	</div>


</div>


<script src="js/jquery-1.8.1.min.js" type="text/javascript"></script>
<script src="js/common.js"></script>


<script src="js/echart.min.js"></script>
<script src="js/china.js"></script>
<script src="js/macarons.js"></script>
<script>




	$.ajax({
		url: serverUrl + "news",
		type: 'get',
		dataType: "json",
		data: {
			page_size:10,
			page_index:1
		},
		success: function (data) {

			console.log(JSON.stringify(data));

			if(data.code==1000)
			{

				for(var i=0;i<data.data.length;i++)
				{
					$("#dataList").append('<tr>' +
							'<td>'+(i+1)+'</td>' +
							'<td>'+data.data[i].news_type+'</td>' +
							'<td>'+data.data[i].report_time+'</td>' +
							'<td>'+data.data[i].title+'</td>' +
							'<td>'+data.data[i].infections+'</td>' +
							'<td>'+data.data[i].fk_virus_type+'</td>' +
							'<td><a href="'+data.data[i].web_url+'">'+data.data[i].web_url+'</a></td></tr>');
				}

			}
			else {
				layer.alert(msg);
			}
		},
		error:function(msg)
		{
			layer.alert("网络异常！");
		}
	});






	$(".tab-col span").click(function()
	{
		$(".tab-col span").removeClass("active");
		$(this).addClass("active");
		$(".tab-list li").hide();
		$(".tab-list li").eq($(this).index()).show();


	});


	option1 = {
		title: {
			text: '折线图堆叠'
		},
		tooltip: {
			trigger: 'axis'
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		toolbox: {
			feature: {
				saveAsImage: {}
			}
		},
		xAxis: {
			type: 'category',
			boundaryGap: false,
			data: ['周一','周二','周三','周四','周五','周六','周日']
		},
		yAxis: {
			type: 'value'
		},
		series: [
			{
				name:'邮件营销',
				type:'line',
				stack: '总量',
				data:[120, 132, 101, 134, 90, 230, 210]
			}
		]
	};



	var chartContainer1 = document.getElementById("myChart1");
	//加载图表
	var myChart1 = echarts.init(chartContainer1,'macarons');
	myChart1.setOption(option1);


	function randomData() {
		return Math.round(Math.random()*1000);
	}

	option2 = {
		title: {
			text: 'iphone销量',
			subtext: '纯属虚构',
			left: 'center'
		},
		tooltip: {
			trigger: 'item'
		},
		legend: {
			orient: 'vertical',
			left: 'left',
			data:['iphone3','iphone4','iphone5']
		},
		visualMap: {
			min: 0,
			max: 2500,
			left: 'left',
			top: 'bottom',
			text: ['高','低'],           // 文本，默认为数值文本
			calculable: true
		},
		toolbox: {
			show: true,
			orient: 'vertical',
			left: 'right',
			top: 'center',
			feature: {
				dataView: {readOnly: false},
				restore: {},
				saveAsImage: {}
			}
		},
		series: [
			{
				name: 'iphone3',
				type: 'map',
				mapType: 'china',
				roam: false,
				label: {
					normal: {
						show: true
					},
					emphasis: {
						show: true
					}
				},
				data:[
					{name: '北京',value: randomData() },
					{name: '天津',value: randomData() },
					{name: '上海',value: randomData() },
					{name: '重庆',value: randomData() },
					{name: '河北',value: randomData() },
					{name: '河南',value: randomData() },
					{name: '云南',value: randomData() },
					{name: '辽宁',value: randomData() },
					{name: '黑龙江',value: randomData() },
					{name: '湖南',value: randomData() },
					{name: '安徽',value: randomData() },
					{name: '山东',value: randomData() },
					{name: '新疆',value: randomData() },
					{name: '江苏',value: randomData() },
					{name: '浙江',value: randomData() },
					{name: '江西',value: randomData() },
					{name: '湖北',value: randomData() },
					{name: '广西',value: randomData() },
					{name: '甘肃',value: randomData() },
					{name: '山西',value: randomData() },
					{name: '内蒙古',value: randomData() },
					{name: '陕西',value: randomData() },
					{name: '吉林',value: randomData() },
					{name: '福建',value: randomData() },
					{name: '贵州',value: randomData() },
					{name: '广东',value: randomData() },
					{name: '青海',value: randomData() },
					{name: '西藏',value: randomData() },
					{name: '四川',value: randomData() },
					{name: '宁夏',value: randomData() },
					{name: '海南',value: randomData() },
					{name: '台湾',value: randomData() },
					{name: '香港',value: randomData() },
					{name: '澳门',value: randomData() }
				]
			},
			{
				name: 'iphone4',
				type: 'map',
				mapType: 'china',
				label: {
					normal: {
						show: true
					},
					emphasis: {
						show: true
					}
				},
				data:[
					{name: '北京',value: randomData() },
					{name: '天津',value: randomData() },
					{name: '上海',value: randomData() },
					{name: '重庆',value: randomData() },
					{name: '河北',value: randomData() },
					{name: '安徽',value: randomData() },
					{name: '新疆',value: randomData() },
					{name: '浙江',value: randomData() },
					{name: '江西',value: randomData() },
					{name: '山西',value: randomData() },
					{name: '内蒙古',value: randomData() },
					{name: '吉林',value: randomData() },
					{name: '福建',value: randomData() },
					{name: '广东',value: randomData() },
					{name: '西藏',value: randomData() },
					{name: '四川',value: randomData() },
					{name: '宁夏',value: randomData() },
					{name: '香港',value: randomData() },
					{name: '澳门',value: randomData() }
				]
			},
			{
				name: 'iphone5',
				type: 'map',
				mapType: 'china',
				label: {
					normal: {
						show: true
					},
					emphasis: {
						show: true
					}
				},
				data:[
					{name: '北京',value: randomData() },
					{name: '天津',value: randomData() },
					{name: '上海',value: randomData() },
					{name: '广东',value: randomData() },
					{name: '台湾',value: randomData() },
					{name: '香港',value: randomData() },
					{name: '澳门',value: randomData() }
				]
			}
		]
	};

	var chartContainer2 = document.getElementById("myChart2");
	//加载图表
	var myChart2 = echarts.init(chartContainer2,'macarons');
	myChart2.setOption(option2);



	option3 = {
		title : {
			text: '某站点用户访问来源',
			subtext: '纯属虚构',
			x:'center'
		},
		tooltip : {
			trigger: 'item',
			formatter: "{a} <br/>{b} : {c} ({d}%)"
		},
		legend: {
			orient: 'vertical',
			left: 'left',
			data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']
		},
		series : [
			{
				name: '访问来源',
				type: 'pie',
				radius : '55%',
				center: ['50%', '60%'],
				data:[
					{value:335, name:'直接访问'},
					{value:310, name:'邮件营销'},
					{value:234, name:'联盟广告'},
					{value:135, name:'视频广告'},
					{value:1548, name:'搜索引擎'}
				],
				itemStyle: {
					emphasis: {
						shadowBlur: 10,
						shadowOffsetX: 0,
						shadowColor: 'rgba(0, 0, 0, 0.5)'
					}
				}
			}
		]
	};

	var chartContainer3 = document.getElementById("myChart3");
	//加载图表
	var myChart3 = echarts.init(chartContainer3,'macarons');
	myChart3.setOption(option3);

</script>



</body>
</html>
